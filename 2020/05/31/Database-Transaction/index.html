<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="google-site-verification" content="yE1jgc5Tv8iV5DSEVyofU-gRWHhi7jbA3b1Q2qvS-gI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="fb:app_id" content="3074485109285192" />
    <meta name="description" content="å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œéè³‡è¨Šç§‘ç³»ç›¸é—œèƒŒæ™¯çš„å·¥ç¨‹å¸«ï¼Œå°æ–¼è³‡æ–™åº«å§‹çµ‚æœ‰è¨±å¤šçš„ä¸ç†è§£ï¼Œä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«æˆ‘åœ¨ç¶²è·¯ä¸Šæ‰¾åˆ°é©åˆéæœ¬ç§‘ç³»çš„åŒå­¸å€‘çœ‹çš„è³‡æ–™ï¼Œä»¥åŠåˆ†äº«ä¸€äº›æˆ‘å°æ–¼è³‡æ–™åº« Ttansaction çš„ç†è§£ã€‚ ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™ è³‡æ–™åº«ç³»çµ±ç®¡ç†èª²ç¨‹é—œæ–¼è³‡æ–™åº« Transaction(äº¤æ˜“) å¯ä»¥çœ‹ Course 8. äº¤æ˜“è™•ç† å’Œ Course 9. ä¸¦è¡Œæ§åˆ¶èˆ‡å›å¾©ï¼Œè£¡é¢æœ‰ æ°å“¥æ•¸ä½æ•™å®¤ youtube">
<meta property="og:type" content="article">
<meta property="og:title" content="è³‡æ–™åº« Transaction(äº¤æ˜“)">
<meta property="og:url" content="https://cindyliu923.com/2020/05/31/Database-Transaction/index.html">
<meta property="og:site_name" content="Cindy&#39;s Blog">
<meta property="og:description" content="å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œéè³‡è¨Šç§‘ç³»ç›¸é—œèƒŒæ™¯çš„å·¥ç¨‹å¸«ï¼Œå°æ–¼è³‡æ–™åº«å§‹çµ‚æœ‰è¨±å¤šçš„ä¸ç†è§£ï¼Œä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«æˆ‘åœ¨ç¶²è·¯ä¸Šæ‰¾åˆ°é©åˆéæœ¬ç§‘ç³»çš„åŒå­¸å€‘çœ‹çš„è³‡æ–™ï¼Œä»¥åŠåˆ†äº«ä¸€äº›æˆ‘å°æ–¼è³‡æ–™åº« Ttansaction çš„ç†è§£ã€‚ ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™ è³‡æ–™åº«ç³»çµ±ç®¡ç†èª²ç¨‹é—œæ–¼è³‡æ–™åº« Transaction(äº¤æ˜“) å¯ä»¥çœ‹ Course 8. äº¤æ˜“è™•ç† å’Œ Course 9. ä¸¦è¡Œæ§åˆ¶èˆ‡å›å¾©ï¼Œè£¡é¢æœ‰ æ°å“¥æ•¸ä½æ•™å®¤ youtube">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/JmoBqZz.png">
<meta property="article:published_time" content="2020-05-31T08:50:34.000Z">
<meta property="article:modified_time" content="2020-06-01T11:30:44.470Z">
<meta property="article:author" content="Cindy Liu">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="PostgreSQL">
<meta property="article:tag" content="Database">
<meta property="article:tag" content="Transaction">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/JmoBqZz.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/mstile-150x150.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>è³‡æ–™åº« Transaction(äº¤æ˜“)</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
      
    
    
      <link rel="alternate" href="/atom.xml" title="Cindy&#39;s Blog" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk/debug.js#xfbml=1&version=v12.0&appId=3074485109285192&autoLogAppEvents=1&colorscheme=light" nonce=Lh92L3Cq></script><script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.nonce ="Lh92L3Cq";
js.src = "https://connect.facebook.net/zh_TW/sdk/debug.js#xfbml=1&version=v12.0&appId=3074485109285192&autoLogAppEvents=1&colorscheme=light&order_by=time";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/06/06/clean-code/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/05/28/first-post/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://cindyliu923.com/2020/05/31/Database-Transaction/" target="_blank" rel="noopener"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&text=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&is_video=false&description=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=è³‡æ–™åº« Transaction(äº¤æ˜“)&body=Check out this article: https://cindyliu923.com/2020/05/31/Database-Transaction/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&name=è³‡æ–™åº« Transaction(äº¤æ˜“)&description=" target="_blank" rel="noopener"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™"><span class="toc-number">1.</span> <span class="toc-text">ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä»€éº¼æ˜¯-Transaction"><span class="toc-number">2.</span> <span class="toc-text">ä»€éº¼æ˜¯ Transaction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-é—œæ–¼-Transaction-çš„æè¿°"><span class="toc-number">2.1.</span> <span class="toc-text">MySQL é—œæ–¼ Transaction çš„æè¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PostgreSQL-é—œæ–¼-Transaction-çš„æè¿°"><span class="toc-number">2.2.</span> <span class="toc-text">PostgreSQL é—œæ–¼ Transaction çš„æè¿°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Transaction-çš„å››å¤§ç‰¹æ€§-ACID"><span class="toc-number">3.</span> <span class="toc-text">Transaction çš„å››å¤§ç‰¹æ€§ ACID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥"><span class="toc-number">4.</span> <span class="toc-text">SQL æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š"><span class="toc-number">5.</span> <span class="toc-text">å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        è³‡æ–™åº« Transaction(äº¤æ˜“)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Cindy's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2020-05-31T08:50:34.000Z" itemprop="datePublished">2020-05-31</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Database/" rel="tag">Database</a>, <a class="tag-link" href="/tags/MySQL/" rel="tag">MySQL</a>, <a class="tag-link" href="/tags/PostgreSQL/" rel="tag">PostgreSQL</a>, <a class="tag-link" href="/tags/SQL/" rel="tag">SQL</a>, <a class="tag-link" href="/tags/Transaction/" rel="tag">Transaction</a>
    </div>


    </div>
    <div class="meta">
      <span class="post-count">ğŸ‘€ 4 min read ğŸ‘€</span>
    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œéè³‡è¨Šç§‘ç³»ç›¸é—œèƒŒæ™¯çš„å·¥ç¨‹å¸«ï¼Œå°æ–¼è³‡æ–™åº«å§‹çµ‚æœ‰è¨±å¤šçš„ä¸ç†è§£ï¼Œä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«æˆ‘åœ¨ç¶²è·¯ä¸Šæ‰¾åˆ°é©åˆéæœ¬ç§‘ç³»çš„åŒå­¸å€‘çœ‹çš„è³‡æ–™ï¼Œä»¥åŠåˆ†äº«ä¸€äº›æˆ‘å°æ–¼è³‡æ–™åº« <a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1" target="_blank" rel="noopener">Ttansaction</a> çš„ç†è§£ã€‚</p>
<h2 id="ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™"><a href="#ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™" class="headerlink" title="ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™"></a>ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™</h2><ul>
<li><p><a href="http://debussy.im.nuu.edu.tw/sjchen/DataBaseMan_Final.html" target="_blank" rel="noopener">è³‡æ–™åº«ç³»çµ±ç®¡ç†èª²ç¨‹</a><br>é—œæ–¼è³‡æ–™åº« Transaction(äº¤æ˜“) å¯ä»¥çœ‹ <strong>Course 8. äº¤æ˜“è™•ç†</strong> å’Œ <strong>Course 9. ä¸¦è¡Œæ§åˆ¶èˆ‡å›å¾©</strong>ï¼Œè£¡é¢æœ‰ <strong>æ°å“¥æ•¸ä½æ•™å®¤</strong> youtube èª²ç¨‹å¯ä»¥æ­é…è¬›ç¾©å­¸ç¿’ï¼Œé›–ç„¶ youtube éŸ³è³ªä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ•´é«”çœ‹ä¸‹ä¾†å°æ–¼æ²’æœ‰ä¸Šéè³‡æ–™åº«èª²ç¨‹çš„å·¥ç¨‹å¸«ï¼Œæˆ‘è¦ºå¾—å°æ–¼è§€å¿µçš„ç†è§£æœƒè »æœ‰å¹«åŠ©çš„ã€‚</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locking-transaction-model.html" target="_blank" rel="noopener">MySQL æ–‡ä»¶</a></p>
</li>
<li><p><a href="https://docs.postgresql.tw/tutorial/advanced-features/transactions" target="_blank" rel="noopener">PostgreSQL æ–‡ä»¶</a></p>
</li>
<li><p><a href="https://docs.postgresql.tw/the-sql-language/concurrency-control/transaction-isolation" target="_blank" rel="noopener">PostgreSQL æ–‡ä»¶ - isolation</a><br>MySQL å’Œ PostgreSQL ç®—æ˜¯ç›®å‰å¸¸ç”¨åˆ°çš„è³‡æ–™åº«ç³»çµ±ï¼Œå¦‚æœåœ¨å¯¦å‹™ä¸Šæœ‰éœ€è¦äº†è§£çš„æ™‚å€™ï¼Œç›´æ¥çœ‹æ–‡ä»¶æœƒæœ€å¿«ï¼Œå› ç‚ºå„å€‹è³‡æ–™åº«ç³»çµ±å¯¦ä½œçš„æ¼”ç®—æ³•ä¸åŒã€‚</p>
</li>
</ul>
<h2 id="ä»€éº¼æ˜¯-Transaction"><a href="#ä»€éº¼æ˜¯-Transaction" class="headerlink" title="ä»€éº¼æ˜¯ Transaction"></a>ä»€éº¼æ˜¯ Transaction</h2><p>å¦‚æœæœ‰é€™æ¨£çš„æƒ…å¢ƒï¼šæŸå€‹åŠŸèƒ½éœ€è¦å°è³‡æ–™åº«é€²è¡Œæ“ä½œï¼Œä¸”æ˜¯å°ä¸€æˆ–å¤šç­†è³‡æ–™é€²è¡Œæ“ä½œï¼Œå¦‚æœä¸­é–“ç™¼ç”Ÿå¤±æ•—ï¼Œæ˜¯ä¸æœƒå…è¨±æœ‰äº›è³‡æ–™è®Šæ›´æˆåŠŸï¼Œæœ‰äº›è³‡æ–™è®Šæ›´å¤±æ•—çš„è©±ï¼Œå°±æœƒéœ€è¦ Transactionã€‚</p>
<h3 id="MySQL-é—œæ–¼-Transaction-çš„æè¿°"><a href="#MySQL-é—œæ–¼-Transaction-çš„æè¿°" class="headerlink" title="MySQL é—œæ–¼ Transaction çš„æè¿°"></a>MySQL é—œæ–¼ Transaction çš„æè¿°</h3><blockquote>
<p>Transactions are atomic units of work that can be <strong>committed</strong> or <strong>rolled back</strong>. When a transaction makes multiple changes to the database, either all the changes succeed when the transaction is committed, or all the changes are undone when the transaction is rolled back.</p>
<p>Database transactions, as implemented by InnoDB, have properties that are collectively known by the acronym <strong>ACID</strong>, for atomicity, consistency, isolation, and durability.</p>
<p>See Also ACID, commit, <strong>isolation level</strong>, <strong>lock</strong>, rollback.</p>
</blockquote>
<h3 id="PostgreSQL-é—œæ–¼-Transaction-çš„æè¿°"><a href="#PostgreSQL-é—œæ–¼-Transaction-çš„æè¿°" class="headerlink" title="PostgreSQL é—œæ–¼ Transaction çš„æè¿°"></a>PostgreSQL é—œæ–¼ Transaction çš„æè¿°</h3><blockquote>
<p>Transactions are a fundamental concept of all database systems. The essential point of a transaction is that it bundles multiple steps into a single, <strong>all-or-nothing</strong> operation. The intermediate states between the steps are not visible to other concurrent transactions, and if some failure occurs that prevents the transaction from completing, then none of the steps affect the database at all.</p>
</blockquote>
<p>ç”±ä»¥ä¸Šå…§å®¹å¯ä»¥çœ‹åˆ°é—œéµå­— <strong>committed</strong> or <strong>rolled back</strong> ï¼Œè¡¨ç¤ºçš„æ˜¯ Transaction çš„å…©ç¨®æƒ…æ³ï¼š</p>
<ul>
<li>æˆåŠŸï¼šcommitted</li>
<li>å¤±æ•—ï¼šrolled back</li>
</ul>
<p>å…¶å¯¦ä¹Ÿå°±æ˜¯ <strong>all-or-nothing</strong> çš„è¡¨ç¤ºï¼Œè¦ä¸æ˜¯å…¨éƒ¨æˆåŠŸ(all)å°±æ˜¯å…¨éƒ¨å¤±æ•—(nothing)ã€‚<br>æœ€å¸¸è¦‹çš„ä¾‹å­å°±æ˜¯è½‰å¸³ï¼Œå‡å¦‚å°æ˜è¦è½‰å¸³çµ¦å°ç¾ï¼Œæˆ‘å€‘ä¸æœƒå¸Œæœ›æœ‰è½‰ä¸€åŠçš„æƒ…æ³ç™¼ç”Ÿï¼Œä¾‹å¦‚å°æ˜æˆåŠŸæ‰£äº†è½‰å¸³å‡ºå»çš„éŒ¢ï¼Œè€Œå°ç¾å»æ²’æœ‰å¾—åˆ°å°æ˜è½‰é€²å¸³æˆ¶çš„éŒ¢ï¼Œæ‰€ä»¥æˆ‘å€‘å°±æœƒéœ€è¦ Transaction ä¾†å¹«åŠ©æˆ‘å€‘åšåˆ° <strong>all-or-nothing</strong>ã€‚<br>=&gt; è©³ç´°åƒè€ƒè³‡æ–™ï¼š<a href="http://debussy.im.nuu.edu.tw/sjchen/Database/Final/Ch09.pdf" target="_blank" rel="noopener">äº¤ï§ ç®¡ï§¤</a></p>
<h2 id="Transaction-çš„å››å¤§ç‰¹æ€§-ACID"><a href="#Transaction-çš„å››å¤§ç‰¹æ€§-ACID" class="headerlink" title="Transaction çš„å››å¤§ç‰¹æ€§ ACID"></a>Transaction çš„å››å¤§ç‰¹æ€§ ACID</h2><ul>
<li>å–®å…ƒæ€§ (<strong>Atomicity</strong>ï¼›åŸºå…ƒæ€§)ï¼š<ul>
<li>äº¤ï§ æ˜¯ä¸€å€‹ï¥§å¯å†åˆ†å‰²çš„å®Œæ•´å€‹é«”ï¼Œå®ƒï¥§æ˜¯å…¨éƒ¨åŸ·ï¨ˆï¼Œå°±æ˜¯å…¨éƒ¨ï¥§åŸ·ï¨ˆã€‚</li>
<li>ç¢ºä¿å–®å…ƒæ€§æ˜¯å›ï¥¦ (<strong>Recovery</strong>) çš„è²¬ä»»ã€‚</li>
</ul>
</li>
<li>ä¸€è‡´æ€§ (<strong>Consistency</strong>)ï¼š<ul>
<li>å¦‚æœäº¤ï§ æ˜¯å…¨éƒ¨åŸ·ï¨ˆï¼Œèƒ½è®“è³‡ï¦¾åº«å¾æŸå€‹ä¸€è‡´ï§ºæ…‹ï¼Œè½‰è®Šåˆ°å¦ä¸€å€‹ä¸€è‡´ï§ºæ…‹ã€‚æˆ‘å€‘å‰‡ç¨±æ­¤æ¬¡äº¤ï§ å…·æœ‰ä¸€è‡´æ€§ã€‚</li>
<li>ç¢ºä¿ä¸€è‡´æ€§é€šå¸¸æ˜¯ DBMS ç¨‹å¼è¨­è¨ˆå¸«çš„è²¬ä»»ã€‚</li>
</ul>
</li>
<li>å­¤ï§·æ€§ (<strong>Isolation</strong>)ï¼š<ul>
<li>æŸäº¤ï§ åŸ·ï¨ˆæœŸé–“æ‰€ç”¨çš„è³‡ï¦¾æˆ–ä¸­é–“çµæœï¼Œï¥§å®¹è¨±å…¶å®ƒäº¤ï§ ï¥šå–æˆ–å¯«å…¥ï¼Œç›´åˆ°æ­¤äº¤ï§ è¢«ç¢ºèª (Commitï¼Œå³ï¼šæˆåŠŸçµæŸ) ç‚ºæ­¢ã€‚ä¹Ÿå°±æ˜¯ï¥¯ï¼Œå®ƒï¥§æ‡‰è¢«åŒæ™‚åŸ·ï¨ˆçš„å…¶å®ƒäº¤ï§ æ‰€å¹²æ“¾ã€‚</li>
<li>ç¢ºä¿å­¤ï§·æ€§æ˜¯ä¸¦ï¨ˆæ§åˆ¶ (<strong>Concurrency Control</strong>) çš„è²¬ä»»ã€‚å¯ä¾éœ€æ±‚å®šï§·ï¥§åŒå±¤ç´šçš„é™åˆ¶ã€‚</li>
</ul>
</li>
<li>æ°¸ä¹…æ€§ (<strong>Durability</strong>, Permanency)ï¼š<ul>
<li>ä¸€æ—¦äº¤ï§ å…¨éƒ¨åŸ·ï¨ˆï¼Œä¸”ç¶“éç¢ºèª (Commit) å¾Œï¼Œå…¶å°è³‡ï¦¾åº«æ‰€åšçš„è®Šï¤å‰‡æ°¸é æœ‰æ•ˆï¼Œå³ä½¿æœªï¤­ç³»çµ±ç•¶æ©Ÿæˆ–æ¯€æã€‚</li>
<li>ä¸€èˆ¬æ˜¯ä»¥å‚™ä»½(Back Up)ã€ç¡¬ç¢Ÿæ˜ å°„(Disk Mirroring)ã€ç³»çµ±æ—¥èªŒ(System Logã€System Journal)ç­‰ï¥©ç¨®æ–¹å¼ï¤­é”æˆã€‚</li>
<li>æ°¸ä¹…æ€§æ˜¯å›ï¥¦ (<strong>Recovery</strong>) çš„è²¬ä»»ã€‚</li>
</ul>
</li>
</ul>
<p>ç”±ä¸Šé¢æ•˜è¿°å°±å¯ä»¥çŸ¥é“ï¼Œå¯¦ç¾ Transaction æœ€é‡è¦çš„å…©ä»¶äº‹æƒ…å°±æ˜¯ï¼š</p>
<ol>
<li><strong>å¤±æ•—å›ï¥¦ã€ï¥¦åŸ (Failure Recovery)</strong></li>
<li><strong>ä¸¦ï¨ˆæ§åˆ¶ (Concurrency Control)</strong><br>=&gt; è©³ç´°åƒè€ƒè³‡æ–™ï¼š<a href="http://debussy.im.nuu.edu.tw/sjchen/Database/Final/Ch10.pdf" target="_blank" rel="noopener">ä¸¦ï¨ˆæ§åˆ¶èˆ‡å›ï¥¦</a></li>
</ol>
<h2 id="SQL-æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥"><a href="#SQL-æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥" class="headerlink" title="SQL æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥"></a>SQL æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥</h2><p><img src="https://i.imgur.com/JmoBqZz.png" alt=""></p>
<blockquote>
<p>åœ–ç‰‡ä¾†è‡ª <a href="https://docs.postgresql.tw/the-sql-language/concurrency-control/transaction-isolation" target="_blank" rel="noopener">PostgreSQL æ–‡ä»¶</a></p>
<ul>
<li>RAED UNCOMMITEDï¼šä½¿ç”¨æŸ¥è©¢èªå¥ä¸æœƒåŠ é–ï¼Œå¯èƒ½æœƒè®€åˆ°æœªæäº¤çš„è³‡æ–™ï¼ˆDirty Readï¼‰</li>
<li>READ COMMITEDï¼šåªå°è¨˜éŒ„åŠ è¨˜éŒ„é–ï¼Œè€Œä¸æœƒåœ¨è¨˜éŒ„ä¹‹é–“åŠ é–“éš™é–ï¼Œæ‰€ä»¥å…è¨±æ–°çš„è¨˜éŒ„æ’å…¥åˆ°è¢«é–å®šè¨˜éŒ„çš„é™„è¿‘ï¼Œæ‰€ä»¥å†å¤šæ¬¡ä½¿ç”¨æŸ¥è©¢èªå¥æ™‚ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„çµæœï¼ˆNon-Repeatable Readï¼‰</li>
<li>REPEATABLE READï¼šå¤šæ¬¡è®€å–åŒä¸€ç¯„åœçš„æ•¸æ“šæœƒè¿”å›ç¬¬ä¸€æ¬¡æŸ¥è©¢çš„å¿«ç…§ï¼Œä¸æœƒè¿”å›ä¸åŒçš„æ•¸æ“šè¡Œï¼Œä½†æ˜¯å¯èƒ½ç™¼ç”Ÿå¹»è®€ï¼ˆPhantom Readï¼‰</li>
<li>SERIALIZABLEï¼šInnoDB éš±å¼åœ°å°‡å…¨éƒ¨çš„æŸ¥è©¢èªå¥åŠ ä¸Šå…±äº«é–ï¼Œè§£æ±ºäº†å¹»è®€çš„å•é¡Œ</li>
</ul>
</blockquote>
<p>p.s. MySQL çš„ InnoDB é è¨­çš„æ˜¯ Repeatable Read<br>p.s. PostgreSQL é è¨­çš„æ˜¯ Read Committed</p>
<h2 id="å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š"><a href="#å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š" class="headerlink" title="å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š"></a>å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š</h2><ul>
<li><a href="https://blog.fntsr.tw/articles/904/#fn-904-START%20TRANSACTION" target="_blank" rel="noopener">PostgreSQL èˆ‡ MySQL é—œæ–¼ transaction çš„è¨­è¨ˆç†å¿µ</a></li>
<li><a href="https://kkc.github.io/2017/10/08/transaction-note" target="_blank" rel="noopener">Transaction ç­†è¨˜</a></li>
<li><a href="https://vladmihalcea.com/a-beginners-guide-to-acid-and-database-transactions" target="_blank" rel="noopener">A beginnerâ€™s guide to ACID and database transactions</a></li>
<li><a href="https://www.guru99.com/dbms-transaction-management.html" target="_blank" rel="noopener">DBMS Transaction Management: ACID Properties, Schedule</a></li>
<li><a href="https://draveness.me/mysql-transaction" target="_blank" rel="noopener">ã€æµ…å…¥æ·±å‡ºã€MySQL ä¸­äº‹åŠ¡çš„å®ç°</a></li>
<li><a href="http://coding-geek.com/how-databases-work" target="_blank" rel="noopener">How does a relational database work</a></li>
<li><a href="https://vinta.ws/code/locking-and-mvcc-in-mysql-innodb.html" target="_blank" rel="noopener">Locking and MVCC in MySQL InnoDB é–æ©Ÿåˆ¶èˆ‡å¤šç‰ˆæœ¬ä¸¦ç™¼æ§åˆ¶</a></li>
</ul>

  </div>
</article>
<script type="text/javascript" src="//js1.bloggerads.net/ShowBanner.aspx?blogid=20201206000001" async></script>


<section id="comments">
<div class="fb-like" data-href="
https://cindyliu923.com/2020/05/31/Database-Transaction/" data-width="" data-layout="button_count" data-action="like" data-size="large" data-share="true""></div>
<div class="fb-comments" data-href="
https://cindyliu923.com/2020/05/31/Database-Transaction/" data-numposts="10" data-width="100%"></div>
</section>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™"><span class="toc-number">1.</span> <span class="toc-text">ç¶²è·¯ä¸Šçš„ç›¸é—œè³‡æ–™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä»€éº¼æ˜¯-Transaction"><span class="toc-number">2.</span> <span class="toc-text">ä»€éº¼æ˜¯ Transaction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-é—œæ–¼-Transaction-çš„æè¿°"><span class="toc-number">2.1.</span> <span class="toc-text">MySQL é—œæ–¼ Transaction çš„æè¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PostgreSQL-é—œæ–¼-Transaction-çš„æè¿°"><span class="toc-number">2.2.</span> <span class="toc-text">PostgreSQL é—œæ–¼ Transaction çš„æè¿°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Transaction-çš„å››å¤§ç‰¹æ€§-ACID"><span class="toc-number">3.</span> <span class="toc-text">Transaction çš„å››å¤§ç‰¹æ€§ ACID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥"><span class="toc-number">4.</span> <span class="toc-text">SQL æ¨™æº–ä¸­å®šç¾©äº†å››ç¨®æ•¸æ“šåº«çš„éš”é›¢ç´šåˆ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š"><span class="toc-number">5.</span> <span class="toc-text">å…¶ä»–å¯åƒè€ƒè³‡æ–™ï¼š</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://cindyliu923.com/2020/05/31/Database-Transaction/" target="_blank" rel="noopener"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&text=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&is_video=false&description=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=è³‡æ–™åº« Transaction(äº¤æ˜“)&body=Check out this article: https://cindyliu923.com/2020/05/31/Database-Transaction/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&title=è³‡æ–™åº« Transaction(äº¤æ˜“)" target="_blank" rel="noopener"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://cindyliu923.com/2020/05/31/Database-Transaction/&name=è³‡æ–™åº« Transaction(äº¤æ˜“)&description=" target="_blank" rel="noopener"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Cindy Liu <a href='/Privacy-Policy'>Privacy Policy</a>
  </div>
  <div class="footer-left">
    . Some links are affiliated
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/posts/">Writing</a></li>
        
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
        
          <li><a href="/search/">Search</a></li>
        
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>



    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-80238614-3', 'auto');
        ga('send', 'pageview');
    </script>



