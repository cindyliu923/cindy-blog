<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="google-site-verification" content="yE1jgc5Tv8iV5DSEVyofU-gRWHhi7jbA3b1Q2qvS-gI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="fb:app_id" content="3074485109285192" />
    <meta name="description" content="å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œå¹¾å¤©å‰å…¬å¸æ—©ä¸Šä¾‹æœƒçš„æ™‚å€™ï¼Œè¨è«–äº†é—œæ–¼ Ruby çš„æŒ‡æ¨™ï¼Œé€™æ¬¡çš„è¨è«–è®“æˆ‘æ˜ç™½åŸä¾† Ruby æ˜¯ç”¨ rvalue ä¾†å¯¦ä½œï¼Œæ˜¯ pass by value ä½†å¦‚æœèªªè¶…éç‰¹å®šé•·åº¦çš„è©±é€™å€‹ value æœƒæœ‰ä¸€å€‹åœ¨ C èªè¨€ä¸­å¯¦åšçš„åƒè€ƒï¼Œè®“æˆ‘æƒ³åˆ°å»å¹´æˆ‘åœ¨å…¬å¸çš„å®˜ç¶²ä¹Ÿæœ‰å¯«éä¸€ç¯‡é—œæ–¼é€™ä»¶äº‹æƒ…çš„æ–‡ç« ï¼Œæ‰€ä»¥æ±ºå®šå°‡é€™ç¯‡æ–‡ç« ä¹Ÿåˆ†äº«åœ¨æˆ‘è‡ªå·±çš„éƒ¨è½æ ¼è£¡ï¼Œä»¥ä¸‹æ˜¯åŸæ–‡ã€‚  å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä¾†è·Ÿå¤§å®¶èªªä¸€å€‹å¦‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ">
<meta property="og:url" content="https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/index.html">
<meta property="og:site_name" content="Cindy&#39;s Blog">
<meta property="og:description" content="å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œå¹¾å¤©å‰å…¬å¸æ—©ä¸Šä¾‹æœƒçš„æ™‚å€™ï¼Œè¨è«–äº†é—œæ–¼ Ruby çš„æŒ‡æ¨™ï¼Œé€™æ¬¡çš„è¨è«–è®“æˆ‘æ˜ç™½åŸä¾† Ruby æ˜¯ç”¨ rvalue ä¾†å¯¦ä½œï¼Œæ˜¯ pass by value ä½†å¦‚æœèªªè¶…éç‰¹å®šé•·åº¦çš„è©±é€™å€‹ value æœƒæœ‰ä¸€å€‹åœ¨ C èªè¨€ä¸­å¯¦åšçš„åƒè€ƒï¼Œè®“æˆ‘æƒ³åˆ°å»å¹´æˆ‘åœ¨å…¬å¸çš„å®˜ç¶²ä¹Ÿæœ‰å¯«éä¸€ç¯‡é—œæ–¼é€™ä»¶äº‹æƒ…çš„æ–‡ç« ï¼Œæ‰€ä»¥æ±ºå®šå°‡é€™ç¯‡æ–‡ç« ä¹Ÿåˆ†äº«åœ¨æˆ‘è‡ªå·±çš„éƒ¨è½æ ¼è£¡ï¼Œä»¥ä¸‹æ˜¯åŸæ–‡ã€‚  å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä¾†è·Ÿå¤§å®¶èªªä¸€å€‹å¦‚">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2020-06-25T09:09:19.000Z">
<meta property="article:modified_time" content="2020-11-22T13:22:49.789Z">
<meta property="article:author" content="Cindy Liu">
<meta property="article:tag" content="Ruby">
<meta property="article:tag" content="pass-by-reference">
<meta property="article:tag" content="pass-by-value">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/mstile-150x150.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
      
    
    
      <link rel="alternate" href="/atom.xml" title="Cindy&#39;s Blog" type="application/atom+xml" />
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk/debug.js#xfbml=1&version=v12.0&appId=3074485109285192&autoLogAppEvents=1&colorscheme=light" nonce=Lh92L3Cq></script><script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.nonce ="Lh92L3Cq";
js.src = "https://connect.facebook.net/zh_TW/sdk/debug.js#xfbml=1&version=v12.0&appId=3074485109285192&autoLogAppEvents=1&colorscheme=light&order_by=time";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/08/30/clean-code-function/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/06/13/clean-code-naming/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/" target="_blank" rel="noopener"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&text=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&is_video=false&description=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ&body=Check out this article: https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&name=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ&description=" target="_blank" rel="noopener"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚³éå¼•æ•¸çš„æ–¹å¼"><span class="toc-number">1.</span> <span class="toc-text">å‚³éå¼•æ•¸çš„æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby-çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ"><span class="toc-number">2.</span> <span class="toc-text">Ruby çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å°çµï¼š"><span class="toc-number">2.1.</span> <span class="toc-text">å°çµï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è§£æ±ºæ–¹æ³•"><span class="toc-number">3.</span> <span class="toc-text">è§£æ±ºæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby-è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•"><span class="toc-number">4.</span> <span class="toc-text">Ruby è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#clone-ä¸åŒæ–¼-dup-çš„-2-é …é¡å¤–åŠŸèƒ½ï¼š"><span class="toc-number">4.1.</span> <span class="toc-text">clone ä¸åŒæ–¼ dup çš„ 2 é …é¡å¤–åŠŸèƒ½ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¿®æ”¹ç¨‹å¼ç¢¼"><span class="toc-number">5.</span> <span class="toc-text">ä¿®æ”¹ç¨‹å¼ç¢¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ³¨æ„"><span class="toc-number">6.</span> <span class="toc-text">æ³¨æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¸½çµ"><span class="toc-number">7.</span> <span class="toc-text">ç¸½çµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åƒè€ƒï¼š-Effective-Ruby"><span class="toc-number">7.1.</span> <span class="toc-text">åƒè€ƒï¼š Effective Ruby</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Cindy's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2020-06-25T09:09:19.000Z" itemprop="datePublished">2020-06-25</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Ruby/" rel="tag">Ruby</a>, <a class="tag-link" href="/tags/pass-by-reference/" rel="tag">pass-by-reference</a>, <a class="tag-link" href="/tags/pass-by-value/" rel="tag">pass-by-value</a>
    </div>


    </div>
    <div class="meta">
      <span class="post-count">ğŸ‘€ 8 min read ğŸ‘€</span>
    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Cindyï¼Œå¹¾å¤©å‰å…¬å¸æ—©ä¸Šä¾‹æœƒçš„æ™‚å€™ï¼Œè¨è«–äº†é—œæ–¼ Ruby çš„æŒ‡æ¨™ï¼Œé€™æ¬¡çš„è¨è«–è®“æˆ‘æ˜ç™½åŸä¾† Ruby æ˜¯ç”¨ rvalue ä¾†å¯¦ä½œï¼Œæ˜¯ pass by value ä½†å¦‚æœèªªè¶…éç‰¹å®šé•·åº¦çš„è©±é€™å€‹ value æœƒæœ‰ä¸€å€‹åœ¨ C èªè¨€ä¸­å¯¦åšçš„åƒè€ƒï¼Œè®“æˆ‘æƒ³åˆ°å»å¹´æˆ‘åœ¨å…¬å¸çš„<a href="https://5xruby.tw/posts/ruby-pass-by-reference-and-value" target="_blank" rel="noopener">å®˜ç¶²</a>ä¹Ÿæœ‰å¯«éä¸€ç¯‡é—œæ–¼é€™ä»¶äº‹æƒ…çš„æ–‡ç« ï¼Œæ‰€ä»¥æ±ºå®šå°‡é€™ç¯‡æ–‡ç« ä¹Ÿåˆ†äº«åœ¨æˆ‘è‡ªå·±çš„éƒ¨è½æ ¼è£¡ï¼Œä»¥ä¸‹æ˜¯åŸæ–‡ã€‚</p>
<hr>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä¾†è·Ÿå¤§å®¶èªªä¸€å€‹å¦‚æœæ˜¯éæœ¬ç§‘ç³»çš„å·¥ç¨‹å¸«ä¸ç¢ºå®šä¸Šèª²æœ‰æ²’æœ‰å­¸éï¼Œå¦‚æœæ˜¯æœ¬ç§‘ç³»çš„æ‡‰è©²æ˜¯ä¸Šèª²æœ‰å­¸éï¼Œèœé³¥å·¥ç¨‹å¸«å¯èƒ½æœƒä¸å°å¿ƒè¸©åˆ°çš„å‘ï¼Œåœ¨é–‹å§‹èªªæ˜ä¹‹å‰å…ˆçµ¦å¤§å®¶çœ‹ä¸€æ®µç¨‹å¼ç¢¼ã€‚</p>
<p>é€™æ˜¯ä¸€æ®µå¾ˆç°¡å–®çš„ Ruby ç¨‹å¼ç¢¼ï¼Œè¡¨ç¤ºèª¿æ•´å»£æ’­é›»å°é »é“çš„é¡åˆ¥ï¼Œæ”¯æ´é è¨­é›»å°çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯èªªä½¿ç”¨è€…åœ¨æŒ‰ä¸‹æŸå€‹æŒ‰éˆ•ï¼Œå°±å¯ä»¥è·³åˆ°å–œæ­¡çš„é »é“(è©±èªªç¾åœ¨å¹´è¼•äººé‚„çŸ¥é“é›»å°å—ï¼Ÿï¼ ï¼ )ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tuner</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(presets)</span></span></span><br><span class="line">    @presets = presets</span><br><span class="line"></span><br><span class="line">    clean</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">clean</span></span></span><br><span class="line">    @presets.delete_if &#123; <span class="params">|preset|</span> preset[-<span class="number">1</span>].to_i.even? &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p presets = <span class="string">%w(90.1 106.2 88.5)</span> <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br><span class="line">p turner = Tuner.new(presets) <span class="comment"># -&gt; &lt;Tuner:0x00007fe7b08ff170 <span class="doctag">@presets</span>=["90.1", "88.5"]&gt;</span></span><br><span class="line">p presets <span class="comment"># -&gt; ["90.1", "88.5"]</span></span><br></pre></td></tr></table></figure>

<p>å¤§å®¶ç™¼ç¾äº†å—ï¼Ÿ presets å·²ç¶“è¢«æˆ‘å€‘æ”¹è®Šäº†ï¼Œåœ¨è¨è«–ç‚ºä»€éº¼ä¹‹å‰æˆ‘å€‘å…ˆä¾†çœ‹çœ‹æœ‰ä»€éº¼æ–¹å¼å¯ä»¥å‚³éå¼•æ•¸ï¼</p>
<h2 id="å‚³éå¼•æ•¸çš„æ–¹å¼"><a href="#å‚³éå¼•æ•¸çš„æ–¹å¼" class="headerlink" title="å‚³éå¼•æ•¸çš„æ–¹å¼"></a>å‚³éå¼•æ•¸çš„æ–¹å¼</h2><ol>
<li><p>Pass-by-referenceï¼šä¸Ÿåˆ°æ–¹æ³•è£¡çš„å¼•æ•¸å¯¦éš›ä¸Šåªæ˜¯è®Šæ•¸çš„åƒè€ƒ(reference)ï¼Œä¿®æ”¹å¼•æ•¸å°±æœƒä¿®æ”¹åˆ°åŸå§‹çš„è®Šæ•¸ã€‚</p>
</li>
<li><p>Pass-by-valueï¼šä¸Ÿåˆ°æ–¹æ³•è£¡çš„å¼•æ•¸æ˜¯è®Šæ•¸çš„å€¼(value)ï¼Œä¿®æ”¹å¼•æ•¸ä¸æœƒä¿®æ”¹åˆ°åŸå§‹çš„è®Šæ•¸ã€‚</p>
</li>
</ol>
<h2 id="Ruby-çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ"><a href="#Ruby-çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ" class="headerlink" title="Ruby çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ"></a>Ruby çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ</h2><p>åƒè€ƒ<a href="https://www.ruby-lang.org/en/documentation/faq/4/" target="_blank" rel="noopener">å®˜ç¶²çš„FAQ</a>ï¼š</p>
<p>åœ¨ Ruby ä¸­æ‰€æœ‰çš„è®Šæ•¸å’Œå¸¸æ•¸éƒ½æœƒæŒ‡å‘ä¸€å€‹åƒè€ƒç‰©ä»¶ï¼Œé™¤äº†ç›´æ¥ä½¿ç”¨æœƒå™´ NameError ä¾‹å¤–éŒ¯èª¤çš„æœªåˆå§‹åŒ–å€åŸŸè®Šæ•¸(æ²’æœ‰åƒè€ƒ)ï¼Œç•¶æˆ‘å€‘æŒ‡æ´¾ä¸€å€‹è®Šæ•¸æˆ–åˆå§‹åŒ–ä¸€å€‹å¸¸æ•¸ï¼Œè¡¨ç¤ºæˆ‘å€‘è¨­å®šäº†è®Šæ•¸æˆ–å¸¸æ•¸æŒ‡å‘çš„åƒè€ƒç‰©ä»¶ã€‚</p>
<p>æ„æ€æ˜¯æŒ‡æ´¾é€™ä»¶äº‹æƒ…ï¼Œå¯¦éš›ä¸Šä¸¦ä¸æœƒç”¢ç”Ÿä¸€å€‹è¤‡è£½çš„æ–°ç‰©ä»¶ï¼Œä¾‹å¦‚å‰é¢ç¯„ä¾‹ç¨‹å¼ç¢¼ä¸­ <code>presets = %w(90.1 106.2 88.5)</code> è¡¨ç¤ºèªª <code>presets</code> æ˜¯æœƒæŒ‡å‘ <code>%w(90.1 106.2 88.5)</code> åƒè€ƒç‰©ä»¶çš„è®Šæ•¸ã€‚</p>
<p>ä½† <code>Fixnum</code>, <code>true</code>, <code>nil</code>, å’Œ <code>false</code> æ˜¯ä¾‹å¤–ï¼Œä»–å€‘æ˜¯ <code>immediate values</code>ï¼Œè®Šæ•¸æœƒä¿æŒæœ¬èº«çš„ç‰©ä»¶è€Œä¸æ˜¯å¦å¤–æŒ‡å‘ä¸€å€‹åƒè€ƒç‰©ä»¶ï¼Œé€™äº›ä¾‹å¤–è¢«æŒ‡æ´¾çš„å¼•æ•¸æœƒç”¢ç”Ÿé€™å€‹é¡å‹çš„è¤‡è£½ç‰©ä»¶ã€‚</p>
<p>ç•¶æ–¹æ³•è¢«èª¿ç”¨æ™‚ï¼Œå¼•æ•¸è¢«æŒ‡æ´¾ç‚ºåƒæ•¸ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addOne</span><span class="params">(n)</span></span></span><br><span class="line">  n += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  a = <span class="number">1</span></span><br><span class="line">p addOne(a) <span class="comment"># -&gt; 2</span></span><br><span class="line">p a         <span class="comment"># -&gt; 1</span></span><br></pre></td></tr></table></figure>

<p>ç•¶å‚³éçš„æ˜¯ç‰©ä»¶çš„åƒè€ƒæ™‚ï¼Œä¸€å€‹æ–¹æ³•æ˜¯æœ‰å¯èƒ½æ”¹è®Šå‚³é€²ä¾†çš„å¯è®Šç‰©ä»¶(mutable object)ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downer</span><span class="params">(string)</span></span></span><br><span class="line">  string.downcase!</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p a = <span class="string">"HELLO"</span> <span class="comment"># -&gt; "HELLO"</span></span><br><span class="line">p downer(a)   <span class="comment"># -&gt; "hello"</span></span><br><span class="line">p a           <span class="comment"># -&gt; "hello"</span></span><br></pre></td></tr></table></figure>
<h3 id="å°çµï¼š"><a href="#å°çµï¼š" class="headerlink" title="å°çµï¼š"></a>å°çµï¼š</h3><ul>
<li>Ruby å‚³éå¼•æ•¸çš„æ–¹æ³•ä¸¦æ²’æœ‰ç›¸ç•¶æ–¼å…¶ä»–èªè¨€çš„ pass-by-referenceã€‚</li>
<li>Ruby æ˜¯ pass-by-valueï¼Œä½†æ˜¯ values æ˜¯ referencesï¼ŒPass by reference value å¯èƒ½æ˜¯ç›¸å°æº–ç¢ºçš„èªªæ³•ã€‚</li>
</ul>
<hr>
<p>å›é ­çœ‹çœ‹ä¸Šé¢çš„ codeï¼ŒæŠŠ <code>object_id</code> å°å‡ºä¾†è§€å¯Ÿï¼Œpresets æ”¹è®Šçš„åŸå› æ˜¯å› ç‚ºå‚³é€²æ–¹æ³•çš„æ˜¯å¯è®Šç‰©ä»¶çš„åƒè€ƒ(ç›¸åŒ <code>object_id</code>)ï¼Œç•¶æˆ‘å€‘ç›´æ¥æ”¹è®Šç‰©ä»¶å°±ç›´æ¥æ”¹åˆ°äº†åŸä¾†çš„ç‰©ä»¶ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tuner</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(presets)</span></span></span><br><span class="line">    @presets = presets</span><br><span class="line"></span><br><span class="line">    clean</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">clean</span></span></span><br><span class="line">    @presets.delete_if &#123; <span class="params">|preset|</span> preset[-<span class="number">1</span>].to_i.even? &#125;</span><br><span class="line">    p @presets.object_id <span class="comment"># -&gt; 70140344834080</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p presets = <span class="string">%w(90.1 106.2 88.5)</span> <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br><span class="line">p presets.object_id <span class="comment"># -&gt; 70140344834080</span></span><br><span class="line">p turner = Tuner.new(presets) <span class="comment"># -&gt; &lt;Tuner:0x00007fe7b08ff170 <span class="doctag">@presets</span>=["90.1", "88.5"]&gt;</span></span><br><span class="line">p presets <span class="comment"># -&gt; ["90.1", "88.5"]</span></span><br></pre></td></tr></table></figure>

<h2 id="è§£æ±ºæ–¹æ³•"><a href="#è§£æ±ºæ–¹æ³•" class="headerlink" title="è§£æ±ºæ–¹æ³•"></a>è§£æ±ºæ–¹æ³•</h2><p>ä¸Šé¢çš„ç¯„ä¾‹ï¼Œçœ‹èµ·ä¾†å¯ä»¥æ”¹æˆé€™æ¨£ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tuner</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(presets)</span></span></span><br><span class="line">    @presets = clean(presets)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">clean</span><span class="params">(presets)</span></span></span><br><span class="line">    presets.reject &#123; <span class="params">|preset|</span> preset[-<span class="number">1</span>].to_i.even? &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p presets = <span class="string">%w(90.1 106.2 88.5)</span> <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br><span class="line">p turner = Tuner.new(presets) <span class="comment"># -&gt; &lt;Tuner:0x00007f9adfaa2b80 <span class="doctag">@presets</span>=["90.1", "88.5"]&gt;</span></span><br><span class="line">p presets <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br></pre></td></tr></table></figure>

<p>å› ç‚º reject æœƒä»¥å‚³å›ä¸€å€‹æ–°çš„é™£åˆ—ä»£æ›¿æ›´æ”¹æ¥æ”¶ç«¯(presets)ï¼Œæ•…åŸæœ¬çš„ç‰©ä»¶ä¸¦ä¸æœƒè¢«æˆ‘å€‘ä¿®æ”¹åˆ°ï¼Œä½†é€™ä¸¦ä¸ä¸€å®šæ˜¯å€‹å¥½æ–¹æ³•ï¼Œå¦‚æœæˆ‘å€‘ä¸éœ€è¦åœ¨åˆå§‹åŒ–çš„éšæ®µå°±æ›´æ”¹ presetsï¼Œæˆ–æ˜¯å…¶ä»–å¯¦é«”çš„æ–¹æ³•æ‰éœ€è¦æ›´æ”¹ presetsï¼Œé‚„æ˜¯æœ‰å¯èƒ½æœƒé‡åˆ°éº»ç…©ã€‚</p>
<p><strong>æ‰€ä»¥å…¶å¯¦æˆ‘å€‘çœŸæ­£æƒ³è¦çš„æ˜¯ï¼Œå¯ä»¥ç”¨è¤‡è£½ç‰©ä»¶ä¾†ä»£æ›¿æŒ‡å‘åŸæœ¬ç‰©ä»¶çš„åƒè€ƒã€‚</strong></p>
<h2 id="Ruby-è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•"><a href="#Ruby-è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•" class="headerlink" title="Ruby è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•"></a>Ruby è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•</h2><p>Ruby æœ‰å…©ç¨®è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•ï¼š<code>dup</code> å’Œ <code>clone</code>ï¼Œé›–ç„¶å…©è€…éƒ½æœƒæ ¹æ“šæ¥æ”¶ç«¯å»ºç«‹æ–°ç‰©ä»¶ï¼Œä½† <code>clone</code> æœƒä¿å­˜åŸå§‹ç‰©ä»¶çš„ 2 é …é¡å¤–åŠŸèƒ½ï¼Œ<code>dup</code> å‰‡ä¸æœƒã€‚</p>
<h3 id="clone-ä¸åŒæ–¼-dup-çš„-2-é …é¡å¤–åŠŸèƒ½ï¼š"><a href="#clone-ä¸åŒæ–¼-dup-çš„-2-é …é¡å¤–åŠŸèƒ½ï¼š" class="headerlink" title="clone ä¸åŒæ–¼ dup çš„ 2 é …é¡å¤–åŠŸèƒ½ï¼š"></a><code>clone</code> ä¸åŒæ–¼ <code>dup</code> çš„ 2 é …é¡å¤–åŠŸèƒ½ï¼š</h3><ol>
<li><p><code>clone</code> æœƒé¡§åŠæ¥æ”¶ç«¯çš„å‡çµç‹€æ…‹(frozen status)ï¼Œå¦‚æœåŸå§‹ç‰©ä»¶å·²ç¶“å‡çµï¼Œé‚£å‰¯æœ¬ä¹Ÿæœƒæ˜¯å‡çµçš„ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">object = Object.new</span><br><span class="line">object.freeze</span><br><span class="line">p object.frozen? <span class="comment"># -&gt; true</span></span><br><span class="line">dup_object = object.dup</span><br><span class="line">p dup_object.frozen? <span class="comment"># -&gt; false</span></span><br><span class="line">clone_object = object.clone</span><br><span class="line">p clone_object.frozen? <span class="comment"># -&gt; true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœæ¥æ”¶ç«¯æœ‰å–®ä¾‹æ–¹æ³•ï¼Œ<code>clone</code> æœƒè¤‡è£½å–®ä¾‹é¡åˆ¥(singleton class)ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">object = Object.new</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">object</span>.<span class="title">wow</span>;</span> <span class="symbol">:wow</span> <span class="keyword">end</span></span><br><span class="line">p object.singleton_methods <span class="comment"># -&gt; [:wow]</span></span><br><span class="line">p object.wow <span class="comment"># -&gt; :wow</span></span><br><span class="line">clone_object = object.clone</span><br><span class="line">dup_object = object.dup</span><br><span class="line">p clone_object.wow <span class="comment"># -&gt; :wow</span></span><br><span class="line">p dup_object.wow <span class="comment"># -&gt; undefined method `wow' for #&lt;Object:0x00007f7effa8af40&gt; (NoMethodError)</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>æ‰€ä»¥ç•¶æˆ‘å€‘æƒ³ä¿®æ”¹ç‰©ä»¶çš„æ™‚å€™ï¼Œå¤§éƒ¨åˆ†æœƒé¸å‰‡ç”¨ <code>dup</code> è€Œä¸æ˜¯ <code>clone</code>ï¼Œå› ç‚ºå‡çµçš„ç‰©ä»¶ç„¡æ³•ä¿®æ”¹æˆ–è§£å‡ï¼Œæ‰€ä»¥ <code>clone</code> å¯èƒ½æœƒå›å‚³ç„¡æ³•ä¿®æ”¹çš„ç‰©ä»¶ã€‚</p>
<h2 id="ä¿®æ”¹ç¨‹å¼ç¢¼"><a href="#ä¿®æ”¹ç¨‹å¼ç¢¼" class="headerlink" title="ä¿®æ”¹ç¨‹å¼ç¢¼"></a>ä¿®æ”¹ç¨‹å¼ç¢¼</h2><p>æ‰€ä»¥æˆ‘å€‘ç¾åœ¨å°‡ç¨‹å¼ç¢¼æ”¹æˆé€™æ¨£ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tuner</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(presets)</span></span></span><br><span class="line">    @presets = presets.dup</span><br><span class="line"></span><br><span class="line">    clean</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">clean</span></span></span><br><span class="line">    @presets.delete_if &#123; <span class="params">|preset|</span> preset[-<span class="number">1</span>].to_i.even? &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p presets = <span class="string">%w(90.1 106.2 88.5)</span> <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br><span class="line">p turner = Tuner.new(presets) <span class="comment"># -&gt; &lt;Tuner:0x00007fe7b08ff170 <span class="doctag">@presets</span>=["90.1", "88.5"]&gt;</span></span><br><span class="line">p presets <span class="comment"># -&gt; ["90.1", "106.2", "88.5"]</span></span><br></pre></td></tr></table></figure>

<p>æ­å–œï¼é€™æ¨£å°±è§£æ±ºäº†æˆ‘å€‘ä¸€é–‹å§‹æ›´æ”¹åˆ°åŸå§‹ç‰©ä»¶çš„å•é¡Œäº†ï¼</p>
<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>é›–ç„¶æˆ‘å€‘å·²ç¶“è§£æ±ºå•é¡Œäº†ï¼Œä½†è¦ç•™æ„ <code>dup</code> å’Œ <code>clone</code> åªæœƒç”¢ç”Ÿæ·ºå±¤è¤‡è£½(shallow copy)çš„ç‰©ä»¶ï¼Œæ„æ€æ˜¯å°æ–¼ <code>Array</code> é€™é¡çš„é›†åˆç‰©ä»¶ï¼Œé›–ç„¶è¤‡è£½äº†å®¹å™¨ï¼Œä½†ä¸¦æœªè¤‡è£½å®¹å™¨å…§çš„å…ƒç´ ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ä¸å½±éŸ¿åŸå§‹ç‰©ä»¶çš„æƒ…æ³ä¸‹åŠ å…¥æˆ–ç§»é™¤å…ƒç´ ï¼Œä½†æ˜¯å¦‚æœæˆ‘å€‘è©¦åœ–è¦ä¿®æ”¹ <code>Array</code> è£¡çš„å…ƒç´ ï¼Œå°±æœƒä¿®æ”¹åˆ°åŸå§‹å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array = [<span class="string">"Polar"</span>]</span><br><span class="line">p dup_array = array.dup &lt;&lt; <span class="string">"Bear"</span> <span class="comment"># -&gt; ["Polar","Bear"]</span></span><br><span class="line">p dup_array.each &#123; <span class="params">|element|</span> element.sub!(<span class="string">"lar"</span>, <span class="string">"oh"</span>) &#125; <span class="comment"># -&gt; ["Pooh", "Bear"]</span></span><br><span class="line">p array <span class="comment"># -&gt; ["Pooh"]</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘å€‘é‚„æ˜¯ä¿®æ”¹åˆ°åŸå§‹ç‰©ä»¶çš„å…ƒç´ äº†ï¼Œç·¨å¯«è‡ªå·±çš„é¡åˆ¥çš„æ™‚å€™æˆ‘å€‘å¯ä»¥è¤‡å¯« <code>initialize_copy</code> é€™å€‹æ–¹æ³•ä¾†æ§åˆ¶è¤‡è£½éé€çš„æ·±åº¦ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ—¢æœ‰é¡åˆ¥æ·±å±¤å‰¯æœ¬çš„ç‰©ä»¶ï¼Œå°±å¿…é ˆè‡ªè¡Œè™•ç†ã€‚</p>
<p>å¦å¤–æœ‰ä¸€å€‹æ–¹æ³•æ˜¯å¯ä»¥ä½¿ç”¨ <a href="https://ruby-doc.org/docs/ruby-doc-bundle/ProgrammingRuby/book/ref_m_marshal.html" target="_blank" rel="noopener">Marshal</a> é¡åˆ¥ä¾†åºåˆ—åŒ–ï¼Œç„¶å¾Œå†å°é›†åˆåŠå…¶å…ƒç´ é€²è¡Œåºåˆ—åŒ–é‚„åŸï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">array = [<span class="string">"Polar"</span>]</span><br><span class="line">p dup_array = Marshal.load(Marshal.dump(array)) &lt;&lt; <span class="string">"Bear"</span> <span class="comment"># -&gt; ["Polar","Bear"]</span></span><br><span class="line">p dup_array.each &#123; <span class="params">|element|</span> element.sub!(<span class="string">"lar"</span>, <span class="string">"oh"</span>) &#125; <span class="comment"># -&gt; ["Pooh", "Bear"]</span></span><br><span class="line">p array <span class="comment"># -&gt; ["Polar"]</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>Marshal</code> æœƒæœ‰ç›¸ç•¶çš„é™åˆ¶ï¼Œé™¤äº†æ™‚é–“ï¼Œä»–è¦å°ç‰©ä»¶åºåˆ—åŒ–ä¸¦é‚„åŸåºåˆ—åŒ–ï¼Œé‚„å¿…é ˆè€ƒæ…®è¨˜æ†¶é«”çš„éœ€æ±‚æ•¸é‡ã€‚è¤‡è£½çš„ç‰©ä»¶å°‡æœƒä½”ç”¨å®ƒè‡ªå·±çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œå¦‚æ­¤ä¸€ä¾†ä½¿å¾— <code>Marshal::dump</code> å»ºç«‹åºåˆ—åŒ–ä½å…ƒçµ„è³‡æ–™æµï¼Œå› æ­¤å‡å¦‚è¼‰å…¥å¤§å‹ç‰©ä»¶æœƒä½¿å¾—ç¨‹å¼å¤§å¹…å¢åŠ è¨˜æ†¶é«”éœ€æ±‚ã€‚</p>
<p>å¦ä¸€å€‹å•é¡Œæ˜¯ <code>Marshal</code> ä¸¦éå¯ä»¥å°æ‰€æœ‰çš„ç‰©ä»¶ä½œåºåˆ—åŒ–ï¼Œä¾‹å¦‚ IO é¡åˆ¥çš„å¯¦é«”ã€å–®ä¾‹ç‰©ä»¶(singleton objects)ç­‰ï¼Œæœƒå¼•ç™¼ TypeError çš„ä¾‹å¤–ã€‚</p>
<h2 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h2><ul>
<li>å¤§éƒ¨åˆ†çš„æƒ…æ³æˆ‘å€‘ä½¿ç”¨ <code>dup</code> å°±å¯ä»¥è§£æ±ºæƒ³è¦è¤‡è£½ç‰©ä»¶çš„å•é¡Œäº†ï¼Œä½†å¦‚æœæˆ‘å€‘å¯ä»¥äº†è§£é€™äº›é™åˆ¶èƒ½è®“æˆ‘å€‘å°‡ä¾†åœ¨éœ€è¦åšæ·±å±¤å‰¯æœ¬çš„æ™‚å€™é é›¢éº»ç…©ã€‚</li>
<li>Ruby è¡¨ç¾å¾—åƒç‚ºä¸å¯è®Šç‰©ä»¶å‚³éå€¼(pass-by-value)ï¼Œç‚ºå¯è®Šç‰©ä»¶å‚³éåƒè€ƒ(pass-by-reference)ã€‚</li>
<li><code>dup</code> å’Œ <code>clone</code> åªæœƒå»ºç«‹æ·ºå±¤å‰¯æœ¬ã€‚</li>
<li>å¤§å¤šæ•¸ç‰©ä»¶ä¾†èªªï¼Œ<code>Marshal</code> èƒ½åœ¨éœ€è¦æ™‚ç”¨ä¾†å»ºç«‹æ·±å±¤å‰¯æœ¬ã€‚</li>
</ul>
<h3 id="åƒè€ƒï¼š-Effective-Ruby"><a href="#åƒè€ƒï¼š-Effective-Ruby" class="headerlink" title="åƒè€ƒï¼š Effective Ruby"></a>åƒè€ƒï¼š <a href="https://amzn.to/2KzOoVD" target="_blank" rel="noopener">Effective Ruby</a></h3>
  </div>
</article>
<script type="text/javascript" src="//js1.bloggerads.net/ShowBanner.aspx?blogid=20201206000001" async></script>


<section id="comments">
<div class="fb-like" data-href="
https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/" data-width="" data-layout="button_count" data-action="like" data-size="large" data-share="true""></div>
<div class="fb-comments" data-href="
https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/" data-numposts="10" data-width="100%"></div>
</section>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚³éå¼•æ•¸çš„æ–¹å¼"><span class="toc-number">1.</span> <span class="toc-text">å‚³éå¼•æ•¸çš„æ–¹å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby-çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ"><span class="toc-number">2.</span> <span class="toc-text">Ruby çš„å¼•æ•¸æ˜¯å¦‚ä½•å‚³éï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å°çµï¼š"><span class="toc-number">2.1.</span> <span class="toc-text">å°çµï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è§£æ±ºæ–¹æ³•"><span class="toc-number">3.</span> <span class="toc-text">è§£æ±ºæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ruby-è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•"><span class="toc-number">4.</span> <span class="toc-text">Ruby è¤‡è£½ç‰©ä»¶çš„æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#clone-ä¸åŒæ–¼-dup-çš„-2-é …é¡å¤–åŠŸèƒ½ï¼š"><span class="toc-number">4.1.</span> <span class="toc-text">clone ä¸åŒæ–¼ dup çš„ 2 é …é¡å¤–åŠŸèƒ½ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¿®æ”¹ç¨‹å¼ç¢¼"><span class="toc-number">5.</span> <span class="toc-text">ä¿®æ”¹ç¨‹å¼ç¢¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ³¨æ„"><span class="toc-number">6.</span> <span class="toc-text">æ³¨æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¸½çµ"><span class="toc-number">7.</span> <span class="toc-text">ç¸½çµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åƒè€ƒï¼š-Effective-Ruby"><span class="toc-number">7.1.</span> <span class="toc-text">åƒè€ƒï¼š Effective Ruby</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/" target="_blank" rel="noopener"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&text=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&is_video=false&description=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ&body=Check out this article: https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&title=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ" target="_blank" rel="noopener"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://cindyliu923.com/2020/06/25/ruby-pass-by-reference-and-value/&name=æ–°æ‰‹ä¸å°å¿ƒæœƒè¸©åˆ°çš„å‘ï¼šæˆ‘çœŸçš„è¤‡è£½å‡ºç‰©ä»¶äº†å—ï¼Ÿ&description=" target="_blank" rel="noopener"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 Cindy Liu <a href='/Privacy-Policy'>Privacy Policy</a>
  </div>
  <div class="footer-left">
    . Some links are affiliated
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/posts/">Writing</a></li>
        
          <li><a href="https://github.com/cindyliu923" target="_blank" rel="noopener">Projects</a></li>
        
          <li><a href="/search/">Search</a></li>
        
          <li><a href="/atom.xml">RSS</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>



    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-80238614-3', 'auto');
        ga('send', 'pageview');
    </script>



